From ebcab285ef03f7c3cf30a77f33cc4066bd469e49 Mon Sep 17 00:00:00 2001
From: "Luke A. Guest" <laguest@archeia.com>
Date: Fri, 8 Aug 2014 17:01:57 +0100
Subject: [PATCH 3/5] Added a link_version target to get the version
 information from a built GCC.

---
 Makefile.in | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/Makefile.in b/Makefile.in
index 140c5dd..a7a0251 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -9,6 +9,7 @@ IS_WINDOWS=@is_windows@
 
 # Relative to the gnat/ subdirectory (or absolute path)
 GNAT_SOURCE_DIR=../gnat_src
+GCC_BUILD_DIR=../gcc_build
 
 ifeq ($(IS_WINDOWS),true)
 LN=cp -p
@@ -63,7 +64,7 @@ endif
 ADA_GEN_SUBDIR=gnat
 
 .PHONY: all distall gprbuild gprconfig gprclean gprinstall \
-	copy_gnat_src complete bootstrap
+	copy_gnat_src link_version complete bootstrap
 all: $(xmlada_build_target) $(ADA_GEN_SUBDIR)/stamp-snames
 	${GNATMAKE} $(xmlada_prj_flags) -Pgprbuild -XBUILD=${BUILD}
 
@@ -95,7 +96,10 @@ copy_gnat_src: force
 	    $(LN) $(GNAT_SOURCE_DIR)/$(f) . ;\
            )
 
-complete: copy_gnat_src all install
+link_version: force
+	$(LN) $(GCC_BUILD_DIR)/gcc/version.o obj/version.o
+
+complete: copy_gnat_src link_version all install
 
 gprbuild:
 	${GNATMAKE} -Pgprbuild -XBUILD=${BUILD} gprbuild-main.adb
-- 
1.8.5.5

